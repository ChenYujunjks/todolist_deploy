## Typescript æ³›å‹å’Œ Promise å­¦ä¹ 

### ğŸš¨ åŸå› ï¼šç®­å¤´å‡½æ•°çš„**éšå¼ return** è§„åˆ™åªå¯¹**å•è¡¨è¾¾å¼**æˆç«‹

è¿™æ˜¯ä¸ªå¾ˆç»å…¸ã€**å¾ˆå®¹æ˜“è¯¯è§£**çš„ JavaScript/TypeScript è¡Œä¸ºï¼ŒèƒŒåå…¶å®æ˜¯è¯­æ³•å·®å¼‚ï¼š

---

#### âœ… æ²¡æœ‰ `{}` çš„ç®­å¤´å‡½æ•°æ˜¯â€œè¡¨è¾¾å¼ä½“â€ â€”â€” è‡ªåŠ¨ return

```ts
.then((user) =>
  fetchJson<Post[]>(...) // âœ… è‡ªåŠ¨ return è¿™ä¸ª Promise
)
```

ä¸Šé¢è¿™ä¸ªæ˜¯**è¡¨è¾¾å¼å½¢å¼**çš„ç®­å¤´å‡½æ•°ï¼Œç­‰ä»·äºï¼š

```ts
.then(function(user) {
  return fetchJson<Post[]>(...);
})
```

---

#### âŒ åŠ äº† `{}` çš„ç®­å¤´å‡½æ•°æ˜¯â€œä»£ç å—ä½“â€ â€”â€” ä¸è‡ªåŠ¨ return

```ts
.then((user) => {
  fetchJson<Post[]>(...); // âŒ æ²¡æœ‰å†™ returnï¼Œè¿™ä¸ªå‡½æ•°é»˜è®¤è¿”å› undefined
})
```

ç­‰ä»·äºï¼š

```ts
.then(function(user) {
  fetchJson<Post[]>(...);
  return undefined;
})
```

---

### âœ… å¦‚ä½•ä¿®å¤ï¼šæ˜¾å¼åŠ  `return`

```ts
.then((user) => {
  console.log("user", user);
  return fetchJson<Post[]>(...); // âœ… æ˜¾å¼ return
})
```

---

### ğŸ§‚ ç®­å¤´å‡½æ•°ä¸­çš„éšå¼ return å°±æ˜¯è¯­æ³•ç³–

ä¸¾ä¸ªç­‰ä»·è½¬æ¢ï¼š

```ts
// ç®€å†™ï¼ˆè¯­æ³•ç³–ï¼‰
const getData = () => fetch("/api");

// ç­‰ä»·äºï¼š
const getData = function () {
  return fetch("/api");
};
```

æ˜¯ä¸æ˜¯â€œç³–â€ï¼Ÿçœ‹ä½ æŠŠ `()` åé¢æ¢æˆ `{}` å°±ç«‹åˆ»æ‰“å›åŸå½¢ ğŸ˜‚

---

### ğŸ¬ å†çœ‹ä½ çš„ä¾‹å­å¯¹æ¯”ï¼š

#### âœ… è‡ªåŠ¨ returnï¼ˆè¯­æ³•ç³–ï¼‰

```ts
.then(user => fetchJson<Post[]>(...))
```

#### âŒ æ²¡æœ‰ returnï¼ˆå—ä½“ï¼Œæ²¡æœ‰è¯­æ³•ç³–ï¼‰

```ts
.then(user => {
  fetchJson<Post[]>(...); // âŒ ä½ å¿…é¡»æ‰‹å†™ return
})
```

---

### ğŸ§  ç†è§£å»ºè®®ï¼š

ä½ å¯ä»¥è¿™æ ·è®°ï¼š

> **ç®­å¤´å‡½æ•°å†™æ³•åˆ†ä¸¤ç§**ï¼š
>
> 1. è¡¨è¾¾å¼ä½“ï¼ˆ`()` åç›´æ¥å†™è¡¨è¾¾å¼ï¼‰ = æœ‰è¯­æ³•ç³–ï¼Œè‡ªåŠ¨ return
> 2. ä»£ç å—ä½“ï¼ˆ`()` åè·Ÿ `{}`ï¼‰ = æ²¡è¯­æ³•ç³–ï¼Œå¿…é¡»æ‰‹å†™ return

---

### ğŸ§ª Bonus ä½ å¯ä»¥äº²è‡ªè¯•è¯•è¿™ä¸ªï¼š

```ts
const hello1 = () => "hi";
const hello2 = () => {
  "hi";
}; // âŒ undefined
const hello3 = () => {
  return "hi";
}; // âœ… "hi"

console.log(hello1()); // "hi"
console.log(hello2()); // undefined â—ï¼ˆè¢«å‘äº†ï¼‰
console.log(hello3()); // "hi"
```

> ä¸ºä»€ä¹ˆ `hello2()` æ˜¯ `undefined`ï¼Ÿå› ä¸ºä½ ç”¨äº† `{}`ï¼Œä½†æ²¡æœ‰ returnï¼Œæ‰€ä»¥å®ƒæ˜¯è¯­æ³•å—ï¼Œä¸è¿”å›å€¼ï¼
