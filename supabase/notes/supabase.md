## âœ… Supabase CLI å¯ä»¥å®Œæˆçš„**æ ¸å¿ƒåŠŸèƒ½åˆ—è¡¨**

### ğŸŒ 1. ç®¡ç†æ•°æ®åº“ç»“æ„ï¼ˆSchemaï¼‰

- `supabase db push`: æŠŠ SQL schema æ¨é€åˆ°æ•°æ®åº“ï¼ˆå¹¶ç”Ÿæˆè¿ç§»ï¼‰
- `supabase db commit`: ä»å½“å‰çŠ¶æ€ç”Ÿæˆè¿ç§»æ–‡ä»¶
- `supabase db reset`: æ¸…ç©ºæ•°æ®åº“å¹¶é‡æ–°æ‰§è¡Œè¿ç§»
- **ğŸš« ç½‘é¡µç‰ˆ table editor æ— æ³•ç®¡ç†è¿ç§»æ–‡ä»¶ï¼**

---

### ğŸ“¦ 2. ç®¡ç†æ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼ˆMigrationsï¼‰

- CLI ä¼šå°†æ¯æ¬¡ç»“æ„å˜åŠ¨ç”Ÿæˆ `.sql` æ–‡ä»¶å­˜å…¥ `supabase/migrations/`
- å¯ç‰ˆæœ¬æ§åˆ¶ï¼ˆæ¯”å¦‚ Gitï¼‰ï¼Œé€‚åˆå¤šäººåä½œï¼Œç±»ä¼¼ git commit ä¸€æ ·çš„æ•°æ®åº“æ¼”è¿›å†å²
- **âœ… ç½‘é¡µç‰ˆæ— æ³•ç”Ÿæˆã€å›æ»šã€ç®¡ç†è¿ç§»æ–‡ä»¶ï¼Œåªèƒ½ç›´æ¥æ”¹å½“å‰ç»“æ„**

---

### ğŸ§¬ 3. ç”Ÿæˆç±»å‹å®šä¹‰ï¼ˆTypeScriptï¼‰

- å‘½ä»¤ï¼š

```bash
supabase gen types typescript --project-id <project-id> --schema public > lib/supabase-types.ts
```

- ä¼šæ ¹æ®å½“å‰æ•°æ®åº“ç»“æ„ï¼Œç”Ÿæˆå®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰

  > âœ… ç”¨äºå‰ç«¯è¡¨å•éªŒè¯ã€Supabase SDK è‡ªåŠ¨è¡¥å…¨ç­‰

- **âŒ ç½‘é¡µç‰ˆæ— æ³•è‡ªåŠ¨ç”Ÿæˆå‰ç«¯ç±»å‹ï¼**

---

### ğŸ§ª 4. æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆä½¿ç”¨ Dockerï¼‰

- `supabase start`ï¼šå¯åŠ¨æœ¬åœ° Supabaseï¼ˆPostgresã€Authã€Storage ç­‰ï¼‰
- å¯ä»¥å®Œå…¨è„±ç¦»ç½‘ç»œã€äº‘ç«¯æœ¬åœ°æ¨¡æ‹Ÿå¼€å‘å’Œæµ‹è¯•
- **âŒ ç½‘é¡µç‰ˆæ²¡æœ‰æœ¬åœ°ç¯å¢ƒåŠŸèƒ½ï¼Œåªèƒ½ç›´æ¥è¿æ¥äº‘æ•°æ®åº“**
  æœ¬åœ°å¼€å‘ä¸æ¨¡æ‹Ÿ Supabase ç¯å¢ƒ

Supabase CLI å¯ä»¥è®©ä½ åœ¨æœ¬åœ°å®Œå…¨ç¦»çº¿è¿è¡Œ Supabase é¡¹ç›®ï¼ˆPostgresã€Authã€Storage ç­‰å…¨éƒ¨æœåŠ¡ï¼‰ï¼Œç”¨äºå¼€å‘è°ƒè¯•ã€‚

### ç›¸å…³å‘½ä»¤ï¼š

- å…³é—­æœåŠ¡ï¼š`npx supabase stop`
- æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼š`npx supabase status`

ğŸ“ ç‰¹åˆ«é€‚åˆå›¢é˜Ÿåä½œ + Git + CI/CD çš„å·¥ä½œæµã€‚

---

### ğŸ” 5. é¡¹ç›®ç»‘å®šä¸é…ç½®

- `supabase link`ï¼šæŠŠ CLI é¡¹ç›®ä¸æŸä¸ªäº‘ç«¯ Supabase é¡¹ç›®ç»‘å®š
- `config.toml`ï¼šè®°å½•é¡¹ç›®ä¿¡æ¯ï¼ˆproject refã€db å¯†ç ã€ç«¯å£ç­‰ï¼‰
- å¤šé¡¹ç›®ç®¡ç†æ”¯æŒï¼ˆæœ¬åœ°å¤šç¯å¢ƒï¼‰

---

## âœ… 6. å…¶ä»–åŠŸèƒ½ï¼ˆéšè—ä½†å¾ˆå¼ºå¤§ï¼‰

| åŠŸèƒ½                 | å‘½ä»¤                               | è¯´æ˜                       |
| -------------------- | ---------------------------------- | -------------------------- |
| ä¸Šä¼  `.env` æ–‡ä»¶ç®¡ç† | `npx supabase secrets`             | ç®¡ç†å‡½æ•°ç”¨åˆ°çš„ç¯å¢ƒå˜é‡     |
| å¯¼å…¥å¯¼å‡ºæ•°æ®åº“       | `npx supabase db dump` / `restore` | æ‰‹åŠ¨å¤‡ä»½å’Œè¿ç§»æ•°æ®         |
| è¿æ¥æ•°æ®åº“           | `npx supabase db remote`           | æ‰“å¼€ Postgres è¿œç¨‹è¿æ¥åœ°å€ |
| éªŒè¯ RLS è§„åˆ™        | ï¼ˆå°†æ¥ç‰ˆæœ¬ï¼‰                       | æœ¬åœ°éªŒè¯æƒé™è§„åˆ™æ˜¯å¦ç”Ÿæ•ˆ   |
